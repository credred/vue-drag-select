(function(t){function e(e){for(var o,r,c=e[0],a=e[1],s=e[2],h=0,d=[];h<c.length;h++)r=c[h],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&d.push(l[r][0]),l[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var a=n[c];0!==l[a]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},l={main:0},i=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var u=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){n("487f"),n("48a2"),t.exports=n("64b5")},1:function(t,e){},"64b5":function(t,e,n){"use strict";n.r(e),function(t){var e=n("7d14");t._StorybookPreserveDecorators=!0,Object(e["configure"])([n("ce05")],t)}.call(this,n("dd40")(t))},7037:function(t,e){t.exports=React},"7dac":function(t,e){t.exports=ReactDOM},"8bbf":function(t,e){t.exports=Vue},c892:function(t,e,n){"use strict";n.r(e),n.d(e,"base",(function(){return D})),n.d(e,"scroll",(function(){return T})),n.d(e,"scrollOnParent",(function(){return X})),n.d(e,"dragOnlyInRect",(function(){return Y}));n("cb29"),n("a15b"),n("d81d");var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drag-select__wrapper"},[n("div",{ref:"content",staticClass:"drag-select",staticStyle:{position:"relative"},on:{mousedown:t._onMousedown}},[t._t("default"),n("div",{staticClass:"drag-select__area",class:t.dragAreaClass,style:t.dragSelectAreaStyles})],2)])},l=[],i=(n("4160"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("5530")),r=n("3835"),c=n("b85c"),a=n("d4ec"),s=n("bee2"),u=n("257e"),h=n("262e"),d=n("2caf"),f=n("9ab4"),v=n("60a3"),p=(n("caad"),n("2532"),function(t){return"undefined"===typeof document?null:t&&t.ownerDocument?t.ownerDocument:document}),y="data-is-scrollable",b=function(t){var e=p(t);if(null===e)return null;var n=t;while(n&&n!==e.body){if("true"===n.getAttribute(y))return n;n=n.parentElement}n=t;while(n&&n!==e.body){if("false"!==n.getAttribute(y)){var o=window.getComputedStyle(n),l=o.getPropertyValue("overflow");if(l.includes("auto")||l.includes("scroll"))return n}n=n.parentElement}return e.body},g=function(t,e){return Math.abs(2*t.left+t.width-2*e.left-e.width)<=t.width+e.width&&Math.abs(2*t.top+t.height-2*e.top-e.height)<=t.height+e.height},m=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;Object(a["a"])(this,t),this.xScrollVelocity=0,this.yScrollVelocity=0,this._onMouseMove=function(t){n._computeScrollVelocity(t),n.needXScroll||n.needYScroll?(t.preventDefault(),t.stopPropagation(),n.startScroll()):n.stopScroll()},this.doScroll=function(){n.scrollableParent&&(n.needXScroll&&(n.scrollableParent.scrollLeft+=n.xScrollVelocity),n.needYScroll&&(n.scrollableParent.scrollTop+=n.yScrollVelocity)),n.cancelScrollId=window.requestAnimationFrame(n.doScroll)},this.scrollGutter=o,this.maxScrollVelocity=i,this.maxScrollSpacing=l,this.scrollableParent=b(e),this.scrollableParent&&(this.scrollableParentRect={left:this.scrollableParent.offsetLeft+this.scrollableParent.clientLeft,top:this.scrollableParent.offsetTop+this.scrollableParent.clientTop,width:this.scrollableParent.clientWidth,height:this.scrollableParent.clientHeight},window.addEventListener("mousemove",this._onMouseMove))}return Object(s["a"])(t,[{key:"dispose",value:function(){window.removeEventListener("mousemove",this._onMouseMove),this.stopScroll()}},{key:"_computeScrollVelocity",value:function(t){var e,n;if(!this.scrollableParentRect)return this.xScrollVelocity=0,void(this.yScrollVelocity=0);var o={top:this.scrollableParentRect.top+this.scrollGutter,bottom:this.scrollableParentRect.top+this.scrollableParentRect.height-this.scrollGutter,left:this.scrollableParentRect.left+this.scrollGutter,right:this.scrollableParentRect.left+this.scrollableParentRect.width-this.scrollGutter},l=p(this.scrollableParent),i=null===l||void 0===l||null===(e=l.scrollingElement)||void 0===e?void 0:e.scrollTop,r=void 0===i?0:i,c=null===l||void 0===l||null===(n=l.scrollingElement)||void 0===n?void 0:n.scrollLeft,a=void 0===c?0:c;t.clientY+r<o.top?this.yScrollVelocity=-Math.min(this.maxScrollVelocity,this.maxScrollVelocity*-(t.clientY+r-o.top)/this.maxScrollSpacing):t.clientY+r>o.bottom?this.yScrollVelocity=Math.min(this.maxScrollVelocity,this.maxScrollVelocity*(t.clientY+r-o.bottom)/this.maxScrollSpacing):this.yScrollVelocity=0,t.clientX+a<o.left?this.xScrollVelocity=-Math.min(this.maxScrollVelocity,this.maxScrollVelocity*-(t.clientX+a-o.left)/this.maxScrollSpacing):t.clientX+a>o.right?this.xScrollVelocity=Math.min(this.maxScrollVelocity,this.maxScrollVelocity*(t.clientX+a-o.right)/this.maxScrollSpacing):this.xScrollVelocity=0}},{key:"startScroll",value:function(){this.cancelScrollId||this.doScroll()}},{key:"stopScroll",value:function(){this.cancelScrollId&&(window.cancelAnimationFrame(this.cancelScrollId),this.cancelScrollId=void 0)}},{key:"needXScroll",get:function(){return 0!==this.xScrollVelocity}},{key:"needYScroll",get:function(){return 0!==this.yScrollVelocity}}]),t}(),S=function(t){Object(h["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.dragSelect=Object(u["a"])(t),t.startPoint=null,t.endPoint=null,t.options=new Map,t.optionRectCache=null,t}return Object(s["a"])(n,[{key:"mounted",value:function(){this._scrollableParent=b(this.contentRef)}},{key:"beforeDestroy",value:function(){window.removeEventListener("mousemove",this._onMousemove),window.removeEventListener("mouseup",this._onMouseup),this._scrollableParent.removeEventListener("scroll",this._onScrollableParentScroll)}},{key:"_getSelfRect",value:function(){var t=this.contentRef;return{left:t.offsetLeft,top:t.offsetTop,width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().height}}},{key:"_getCurrentPoint",value:function(t){var e=this.contentRef.getBoundingClientRect(),n=e.left,o=e.top,l=e.width,i=e.height;return{x:Math.max(0,Math.min(t.clientX-n-this.contentRef.clientLeft,l)),y:Math.max(0,Math.min(t.clientY-o-this.contentRef.clientTop,i))}}},{key:"_isMouseEventInClientArea",value:function(t){var e,n,o=p(this.contentRef),l=null===o||void 0===o||null===(e=o.scrollingElement)||void 0===e?void 0:e.scrollTop,i=void 0===l?0:l,r=null===o||void 0===o||null===(n=o.scrollingElement)||void 0===n?void 0:n.scrollLeft,c=void 0===r?0:r,a=this.contentRef;return!(t.clientX+c<a.offsetLeft+a.clientLeft||t.clientX+c>a.offsetLeft+a.clientLeft+a.clientWidth)&&!(t.clientY+i<a.offsetTop+a.clientTop||t.clientY+i>a.offsetTop+a.clientTop+a.clientHeight)}},{key:"_onMousedown",value:function(t){this.cleanDrag(),this._isMouseEventInClientArea(t)&&(this.startPoint=this._getCurrentPoint(t),this.autoScroll=new m(this.contentRef),window.addEventListener("mousemove",this._onMousemove),window.addEventListener("mouseup",this._onMouseup),this._scrollableParent.addEventListener("scroll",this._onScrollableParentScroll))}},{key:"_onMousemove",value:function(t){this._drag(t),t.preventDefault(),t.stopPropagation()}},{key:"_onMouseup",value:function(){this.cleanDrag()}},{key:"_onScrollableParentScroll",value:function(t){this._drag(t)}},{key:"_drag",value:function(t){void 0!==t.clientX&&(this.lastMouseEvent=t),this.endPoint=this._getCurrentPoint(this.lastMouseEvent);var e,n={},o={},l=Object(c["a"])(this.options);try{for(l.s();!(e=l.n()).done;){var i=Object(r["a"])(e.value,2),a=i[0],s=i[1];if(this.optionRectCache||(this.optionRectCache=new Map),!this.optionRectCache.has(a)){var u=s.$el;this.optionRectCache.set(a,{left:u.offsetLeft,top:u.offsetTop,width:u.offsetWidth,height:u.offsetHeight})}var h=g(this.dragSelectAreaRect,this.optionRectCache.get(a));h&&(n[a]=!0,o[a]=!0)}}catch(p){l.e(p)}finally{l.f()}var d=!1;if(!d)for(var f in this.selectedOptionKeys)if(delete o[f],this.selectedOptionKeys[f]!==n[f]){d=!0;break}for(var v in o)if(this.selectedOptionKeys[v]!==n[v]){d=!0;break}d&&(this.selectedOptionKeys=n)}},{key:"cleanDrag",value:function(){var t;this.startPoint=null,this.endPoint=null,null===(t=this.autoScroll)||void 0===t||t.dispose(),window.removeEventListener("mousemove",this._onMousemove),window.removeEventListener("mouseup",this._onMouseup),this._scrollableParent.removeEventListener("scroll",this._onScrollableParentScroll),this.optionRectCache=null}},{key:"dragSelectAreaRect",get:function(){return this.startPoint&&this.endPoint?{left:Math.min(this.startPoint.x,this.endPoint.x),top:Math.min(this.startPoint.y,this.endPoint.y),width:Math.abs(this.startPoint.x-this.endPoint.x),height:Math.abs(this.startPoint.y-this.endPoint.y)}:null}},{key:"dragSelectAreaStyles",get:function(){if(!this.dragSelectAreaRect)return{display:"none"};var t=this.dragSelectAreaRect,e=t.left,n=t.top,o=t.width,l=t.height;return Object(i["a"])(Object(i["a"])({position:"absolute"},this.dragAreaStyle),{},{left:"".concat(e,"px"),top:"".concat(n,"px"),width:"".concat(o,"px"),height:"".concat(l,"px")})}},{key:"selectedOptionKeys",get:function(){var t={};return this.value.forEach((function(e){t[e]=!0})),t},set:function(t){this.$emit("change",Object.keys(t))}}]),n}(v["f"]);Object(f["a"])([Object(v["d"])()],S.prototype,"dragSelect",void 0),Object(f["a"])([Object(v["c"])({default:function(){return[]}})],S.prototype,"value",void 0),Object(f["a"])([Object(v["c"])()],S.prototype,"dragAreaClass",void 0),Object(f["a"])([Object(v["c"])({type:Object,default:function(){return{}}})],S.prototype,"dragAreaStyle",void 0),Object(f["a"])([Object(v["c"])({default:""})],S.prototype,"SelecteditemClass",void 0),Object(f["a"])([Object(v["e"])("content")],S.prototype,"contentRef",void 0),S=Object(f["a"])([Object(v["a"])({name:"DragSelect"})],S);var O=S,w=O,j=n("2877"),P=Object(j["a"])(w,o,l,!1,null,null,null),_=P.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.itemClass},[t._t("default")],2)},M=[],C=(n("c975"),n("a434"),n("ade3")),R=function(t){Object(h["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(a["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"created",value:function(){this.dragSelect.options.set(this.itemKey,this)}},{key:"beforeDestroy",value:function(){var t;this.dragSelect.options.delete(this.itemKey),null===(t=this.dragSelect.optionRectCache)||void 0===t||t.delete(this.itemKey);var e=this.dragSelect.value.indexOf(this.itemKey);e>-1&&this.dragSelect.value.splice(e,1)}},{key:"itemClass",get:function(){var t;return t={"drag-select__option":!0,"drag-select__option--selected":this.isSelected},Object(C["a"])(t,this.dragSelect.SelecteditemClass,this.isSelected),Object(C["a"])(t,this.selectedClass,this.isSelected),t}},{key:"isSelected",get:function(){return!!this.dragSelect.selectedOptionKeys[this.itemKey]}}]),n}(v["f"]);Object(f["a"])([Object(v["b"])()],R.prototype,"dragSelect",void 0),Object(f["a"])([Object(v["c"])({required:!0})],R.prototype,"itemKey",void 0),Object(f["a"])([Object(v["c"])({default:""})],R.prototype,"selectedClass",void 0),R=Object(f["a"])([Object(v["a"])({name:"DragSelectOption"})],R);var k=R,V=k,E=Object(j["a"])(V,x,M,!1,null,null,null),L=E.exports,A=(n("d4b2"),n("8bbf")),K=n.n(A),D=(e["default"]={title:"base"},function(){return K.a.extend({data:function(){return{value:[]}},methods:{handleChange:function(t){this.value=t}},render:function(){var t=arguments[0];return t("div",[t("div",["selected: ",this.value.join(",")]),t(_,{attrs:{value:this.value},on:{change:this.handleChange}},[Array(20).fill(0).map((function(e,n){return t(L,{attrs:{itemKey:n}},[n])}))])])}})}),T=function(){return K.a.extend({data:function(){return{value:[]}},methods:{handleChange:function(t){this.value=t}},render:function(){var t=arguments[0];return t("div",[t("div",["scroll on dragSelect compoent itself"]),t("div",["selected: ",this.value.join(",")]),t(_,{attrs:{value:this.value},style:{height:"300px",overflow:"auto"},on:{change:this.handleChange}},[Array(30).fill(0).map((function(e,n){return t(L,{attrs:{itemKey:n}},[n])}))])])}})},X=function(){return K.a.extend({data:function(){return{value:[]}},methods:{handleChange:function(t){this.value=t}},render:function(){var t=arguments[0];return t("div",{style:{height:"300px",overflow:"auto"}},[t("div",["scroll on dragSelect compoent parent"]),t("div",["selected: ",this.value.join(",")]),t(_,{attrs:{value:this.value},on:{change:this.handleChange}},[Array(30).fill(0).map((function(e,n){return t(L,{attrs:{itemKey:n}},[n])}))])])}})},Y=function(){return K.a.extend({data:function(){return{value:[]}},methods:{handleChange:function(t){this.value=t}},render:function(){var t=arguments[0];return t("div",[t("div",["drag only in client(mousedown event will not trigger on scrollbar or border)"]),t("div",["selected: ",this.value.join(",")]),t(_,{attrs:{value:this.value},style:{height:"300px",overflow:"auto",border:"20px solid #d83512"},on:{change:this.handleChange}},[Array(30).fill(0).map((function(e,n){return t(L,{attrs:{itemKey:n}},[n])}))])])}})}},ce05:function(t,e,n){var o={"./base.stories.jsx":"c892"};function l(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}l.keys=function(){return Object.keys(o)},l.resolve=i,t.exports=l,l.id="ce05"},d4b2:function(t,e,n){}});
//# sourceMappingURL=main.5fbb6f803f5b2c85ffe3.bundle.js.map